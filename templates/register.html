<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ translations.register }}</title>
</head>
<body>
{% if message %}<p id="message">{{ message }}</p>{% endif %}
<form method="post" action="{% url 'register' %}?language={{language}}">
    {% csrf_token %}

    <label for="username">{{ translations.username }}</label><br>
    <input type="text" name="username" id="username" required value="{{username}}"><br>

    <label for="email">{{ translations.email }}</label><br>
    <input type="email" name="email" id="email" required value="{{email}}"><br>

    <label for="password">{{ translations.password }}</label><br>
    <input type="password" name="password" id="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"><br>

    <label for="password2">{{ translations.password2 }}</label><br>
    <input type="password" name="password2" id="password2" required>
    <input type="hidden" name="language" value="{{ language }}">
    <div>
        <input type="submit" name="register" value="{{ translations.register }}" />
    </div>
</form>
<br>
<a href="{% url 'login' %}?language={{language}}" id="login">{{ translations.login }}</a>
<script type="text/javascript">
var password1 = document.getElementById("password1")
var password2 = document.getElementById("password2");

function validatePassword(){
  if(password.value != password2.value) {
    password2.setCustomValidity("{{ translations.passwords_dont_match }}".replace("&#x27;", "'"));
  } else {
    password2.setCustomValidity('');
  }
}

password.onchange = validatePassword;
password2.onkeyup = validatePassword;



</script>

</body>
</html>